<!DOCTYPE html>

<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Queue Mechanics</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&amp;display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet" />
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: 'Noto Sans KR', sans-serif;
        background-color: #0f172a;
        color: #ffffff;
      }
      .slide-container {
        width: 1280px;
        height: 720px;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        background-color: #0f172a;
      }

      /* Background Grid */
      .bg-grid {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: linear-gradient(#1e293b 1px, transparent 1px), linear-gradient(90deg, #1e293b 1px, transparent 1px);
        background-size: 40px 40px;
        opacity: 0.1;
        z-index: 0;
      }

      .header {
        padding: 30px 60px 10px 60px;
        z-index: 10;
      }

      .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 20px 60px 40px 60px;
        z-index: 10;
      }

      /* Diagram Area */
      .diagram-container {
        flex: 1;
        background-color: #1e293b;
        border-radius: 20px;
        border: 1px solid #334155;
        position: relative;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 40px;
        box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.3);
      }

      /* RabbitMQ Logo/Brand representation */
      .mq-label {
        position: absolute;
        top: 20px;
        left: 20px;
        background-color: #ff6600;
        color: white;
        padding: 5px 15px;
        border-radius: 6px;
        font-weight: bold;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* Pipeline Components */
      .pipeline-wrapper {
        display: flex;
        align-items: center;
        width: 100%;
        justify-content: space-between;
        position: relative;
      }

      /* Producer */
      .producer-box {
        width: 140px;
        height: 140px;
        background-color: #334155;
        border: 2px solid #475569;
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 2;
      }

      /* Queue Tube */
      .queue-tube-container {
        flex: 1;
        margin: 0 30px;
        height: 100px;
        position: relative;
        display: flex;
        align-items: center;
      }

      .queue-tube {
        width: 100%;
        height: 80px;
        background-color: rgba(15, 23, 42, 0.6);
        border-top: 2px dashed #475569;
        border-bottom: 2px dashed #475569;
        position: relative;
        display: flex;
        align-items: center;
        padding: 0 20px;
        gap: 15px;
        overflow: hidden;
      }

      .queue-tube::before {
        content: 'Waiting Tasks';
        position: absolute;
        top: -25px;
        left: 50%;
        transform: translateX(-50%);
        color: #64748b;
        font-size: 12px;
        font-weight: bold;
        letter-spacing: 1px;
      }

      /* Task Items */
      .task-item {
        width: 60px;
        height: 60px;
        background-color: #38bdf8;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #0f172a;
        font-weight: 900;
        font-size: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        position: relative;
        flex-shrink: 0;
      }

      .task-item.processing {
        background-color: #facc15; /* Yellow */
        transform: scale(1.1);
        box-shadow: 0 0 15px rgba(250, 204, 21, 0.5);
        z-index: 5;
      }

      /* Consumer */
      .consumer-box {
        width: 180px;
        height: 180px;
        background-color: #1e293b;
        border: 2px solid #38bdf8;
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 2;
        box-shadow: 0 0 30px rgba(56, 189, 248, 0.1);
      }

      /* Arrows and Flow Lines */
      .flow-arrow {
        position: absolute;
        height: 2px;
        background-color: #64748b;
        width: 30px;
      }

      .flow-arrow::after {
        content: '';
        position: absolute;
        right: 0;
        top: -4px;
        border-left: 6px solid #64748b;
        border-top: 5px solid transparent;
        border-bottom: 5px solid transparent;
      }

      /* Explanatory Cards */
      .info-cards {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
      }

      .info-card {
        background-color: rgba(30, 41, 59, 0.5);
        border: 1px solid #334155;
        padding: 20px;
        border-radius: 12px;
        display: flex;
        align-items: flex-start;
        gap: 15px;
      }

      .step-badge {
        background-color: #0f172a;
        color: #94a3b8;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        border: 1px solid #334155;
        flex-shrink: 0;
      }

      .highlight-text {
        color: #38bdf8;
        font-weight: bold;
      }

      /* Processing Label */
      .processing-label {
        position: absolute;
        bottom: -40px;
        background-color: #facc15;
        color: #0f172a;
        padding: 4px 12px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 12px;
      }

      /* Connection Lines for Ack */
      .ack-line {
        position: absolute;
        bottom: -30px;
        right: 90px;
        width: 50%;
        height: 30px;
        border-bottom: 2px dashed #10b981; /* Green */
        border-left: 2px dashed #10b981;
        border-radius: 0 0 0 10px;
        opacity: 0.6;
        pointer-events: none;
      }

      .ack-label {
        position: absolute;
        bottom: -45px;
        right: 150px;
        color: #10b981;
        font-size: 12px;
        font-weight: bold;
      }

      /* 1 at a time badge */
      .one-at-a-time {
        position: absolute;
        top: -15px;
        right: -15px;
        background-color: #ef4444;
        color: white;
        font-size: 12px;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: bold;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        transform: rotate(5deg);
      }

      /* Incoming Task Animation placeholder representation */
      .incoming-task {
        position: absolute;
        left: 150px;
        top: 50%;
        transform: translateY(-50%);
        opacity: 0.5;
      }
    </style>
  </head>
  <body>
    <div class="slide-container">
      <div class="bg-grid"></div>
      <!-- Header -->
      <div class="header">
        <div class="flex items-center mb-2">
          <div class="h-1 w-10 bg-blue-400 mr-3"></div>
          <p class="text-blue-400 font-bold uppercase tracking-widest text-sm">RabbitMQ Mechanism</p>
        </div>
        <h1 class="text-4xl font-black text-white">대기열(Queue) <span class="text-blue-400">동작 방식</span></h1>
        <p class="text-gray-400 mt-2 text-lg">안정적인 처리를 위한 '1개씩 가져오기' 규칙</p>
      </div>
      <!-- Main Content -->
      <div class="main-content">
        <!-- Visual Diagram -->
        <div class="diagram-container">
          <div class="mq-label"><i class="fas fa-layer-group"></i> RabbitMQ</div>
          <div class="pipeline-wrapper">
            <!-- Producer -->
            <div class="producer-box">
              <i class="fas fa-mobile-screen-button text-4xl text-gray-400 mb-2"></i>
              <p class="font-bold text-gray-300">매니저앱</p>
              <p class="text-xs text-gray-500">요청 발생</p>
            </div>
            <!-- Flow Arrow -->
            <div class="flow-arrow" style="left: 150px"></div>
            <!-- Queue -->
            <div class="queue-tube-container">
              <div class="queue-tube">
                <!-- Tasks inside queue -->
                <div class="task-item">5</div>
                <div class="task-item">4</div>
                <div class="task-item">3</div>
                <div class="task-item">2</div>
              </div>
            </div>
            <!-- Flow Arrow -->
            <div class="flow-arrow" style="right: 200px"></div>
            <!-- Consumer -->
            <div class="consumer-box">
              <div class="one-at-a-time">1개씩만!</div>
              <i class="fas fa-robot text-5xl text-blue-400 mb-3"></i>
              <p class="font-bold text-white text-lg">AI 시스템</p>
              <p class="text-xs text-blue-300">Consumer</p>
              <!-- Currently Processing Item -->
              <div class="absolute" style="left: -45px; top: 50%; transform: translateY(-50%)">
                <div class="task-item processing">1</div>
              </div>
              <div class="processing-label">처리 중 (Processing)</div>
            </div>
            <!-- Ack Feedback Line -->
            <div class="ack-line"></div>
            <div class="ack-label"><i class="fas fa-check-circle mr-1"></i>처리 완료 알림 (Ack)</div>
          </div>
        </div>
        <!-- Explanation Cards -->
        <div class="info-cards">
          <div class="info-card">
            <div class="step-badge">1</div>
            <div>
              <h3 class="text-white font-bold text-lg mb-1">순차적 적재 (Enqueue)</h3>
              <p class="text-gray-400 text-sm leading-relaxed">매니저앱에서 요청된 작업들이 <span class="highlight-text">대기열에 순서대로</span> 쌓입니다. 번호표를 뽑고 기다리는 것과 같습니다.</p>
            </div>
          </div>
          <div class="info-card">
            <div class="step-badge">2</div>
            <div>
              <h3 class="text-white font-bold text-lg mb-1">안정적 처리 (Prefetch=1)</h3>
              <p class="text-gray-400 text-sm leading-relaxed">AI 시스템은 한 번에 <span class="highlight-text">딱 1개의 작업만</span> 가져옵니다. 과부하를 방지하고 안정성을 높입니다.</p>
            </div>
          </div>
          <div class="info-card">
            <div class="step-badge">3</div>
            <div>
              <h3 class="text-white font-bold text-lg mb-1">수신 확인 (Ack)</h3>
              <p class="text-gray-400 text-sm leading-relaxed">작업을 무사히 받으면 <span class="text-green-400 font-bold">"접수됨"</span> 신호를 보냅니다. 처리가 끝나면 다음 작업을 가져옵니다.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      document.body.addEventListener('click', () => {
        window.location.href = '6.html';
      });
    </script>
  </body>
</html>
